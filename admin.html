<!DOCTYPE html><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
    // PEGA AQUÍ EL MISMO objeto firebaseConfig que está arriba
    const firebaseConfig = {
      apiKey: "AIzaSyAzBO8TzuGeAV-_nsGDgIWckWhV_vkOhTY",
      authDomain: "cartelera-nube.firebaseapp.com",
      databaseURL: "https://cartelera-nube-default-rtdb.firebaseio.com",
      projectId: "cartelera-nube",
      storageBucket: "cartelera-nube.firebasestorage.app",
      messagingSenderId: "333887658907",
      appId: "1:333887658907:web:c9d3904ad02a8fd9fe1f3e"
    };
    firebase.initializeApp(firebaseConfig);
    const dbRemota = firebase.database();

    // MODIFICA TU FUNCIÓN actualizarCarteleraTotal POR ESTA:
    function actualizarCarteleraTotal() {
        const tx = db.transaction("items", "readonly");
        const store = tx.objectStore("items");
        store.getAll().onsuccess = (e) => {
            const todos = e.target.result;
            const dataFinal = {
                texto: todos.filter(i => i.tipo === 'central').map(i => i.contenido).join('\n'),
                zocalo: todos.filter(i => i.tipo === 'zocalo').map(i => i.contenido).join('  ———  '),
                fotos: todos.filter(i => i.tipo === 'foto').map(i => i.contenido)
            };
            
            // Subir a Firebase
            dbRemota.ref('carteleraData').set(dataFinal);
            renderHistorial();
        };
    }
    // ... (el resto de tus funciones como renderHistorial y eliminarItem siguen igual)
</script>
</html>
